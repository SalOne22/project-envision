!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequire34ff;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequire34ff=i),i("i8Q71"),i("79BxU");var r=i("4DnXZ"),s=i("6JpON");let l=document.querySelector(".gallery");function o(){l.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}var c=i("kV76N"),u=e=>{let t=[],a=new Date().getFullYear();for(let n=a;n>=e;n-=1)t.push({id:n,name:n});return t},d=()=>`
<div class="gallery-empty"
    <p class="text-empty">OOPS...<br>
    We are very sorry!<br>
    We donâ€™t have any results matching your search.
    </p>
</div>   
`,h=i("kvC6y"),p=i("6sNo0"),g=i("14Rx2"),y=i("16wVm"),f=i("dIxxU"),s=i("6JpON");let m="https://api.themoviedb.org/3/",I="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5NWQzY2MzZDA1Nzk2OGE0YWJlZGY1MzVkOGNiZDIwMiIsInN1YiI6IjY0N2EzNjI3Y2FlZjJkMDExOWJmMDc3ZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Vnk9Mx4FCU9-aMju8ubwqMt0iiZWjWxQo-T3KlsNAWg";async function v(e){try{let{data:t}=await (0,f.default).get(`${m}trending/movie/week?language=en-US&page=${e}`,{headers:{Authorization:`Bearer ${I}`,accept:"application/json"}});return t}catch(e){(0,s.Notify).failure("Sorry, there are no movies matching your search query. Please try again.")}}async function x(e,t,a){try{let{data:n}=await (0,f.default).get(`${m}search/movie?query=${t}&page=${e}${a?`&primary_release_year=${a}`:""}`,{headers:{Authorization:`Bearer ${I}`,accept:"application/json"}});return n}catch(e){(0,s.Notify).failure("Sorry, there are no images matching your search query. Please try again.")}}async function C(e,t,a){try{let{data:n}=await (0,f.default).get(`${m}discover/movie?with_genres=${t}&page=${e}${a?`&primary_release_year=${a}`:""}`,{headers:{Authorization:`Bearer ${I}`,accept:"application/json"}});return n}catch(e){(0,s.Notify).failure("Sorry, there are no images matching your search query. Please try again.")}}let w={form:document.querySelector("#search-form"),searchInput:document.querySelector('[name="searchQuery"]'),gallery:document.querySelector(".gallery"),clearBtn:document.querySelector(".clear-btn"),yearSelectEl:document.getElementById("year-select"),paginationContainer:document.querySelector(".pagination ul"),genreSelectEl:document.getElementById("genres-select")};var h=(i("kvC6y"),i("kvC6y")),b=i("XcJ0g");let k=z(_),M=z(j),E=z(W),L=new class{pageCount=0;pageIndex=0;container=null;constructor({container:e,count:t,index:a,callback:n}){this.pageCount=t,this.pageIndex=a,this.container=e,this.callBack=n,this.render=this.render.bind(this),this.handlePaginationItemClick=this.handlePaginationItemClick.bind(this),this.render(),document.addEventListener("click",this.handlePaginationItemClick)}render(){let e="",t=this.pageIndex-1,a=this.pageIndex+1;if(this.pageCount>1&&(e+='<li class="btn prev list-item"><span><i class="fas fa-angle-left"></i>&lsaquo;</span></li>'),!(this.pageIndex<1)&&!(this.pageIndex>this.pageCount)){this.pageIndex>2&&this.pageCount>4&&(e+='<li data-index="1" class="first list-item"><span>1</span></li>',this.pageIndex>3&&this.pageCount>5&&(e+='<li class="dots"><span>...</span></li>')),this.pageIndex===this.pageCount?t-=2:this.pageIndex===this.pageCount-1&&(t-=1),1===this.pageIndex?a+=2:2===this.pageIndex&&(a+=1);for(let n=t;n<=a;n++)n>this.pageCount||(n<0&&(n=0),0===n&&(n+=1),e+=`<li data-index="${n}" class="list-item ${this.pageIndex===n?"active":""}"><span>${n}</span></li>`);this.pageIndex<this.pageCount-1&&(this.pageIndex<this.pageCount-2&&this.pageCount>5&&(e+='<li class="dots"><span>...</span></li>'),this.pageCount>4&&(e+=`<li data-index="${this.pageCount}" class="last list-item"><span>${this.pageCount}</span></li>`)),this.pageCount>1&&(e+='<li class="btn next list-item"><span>&rsaquo;<i class="fas fa-angle-right"></i></span></li>'),this.container&&(this.container.innerHTML=e)}}handlePaginationItemClick(e){e.stopPropagation();let t=e.target,a=t.closest(".list-item"),n=a?.classList.contains("btn")||!1,i=a?.classList.contains("prev")||!1;if(n){this.pageIndex<this.pageCount&&!i?this.setPageIndex(this.pageIndex+1):this.pageIndex>1&&i?this.setPageIndex(this.pageIndex-1):this.pageIndex!==this.pageCount||i||(a.disabled=!0),this.callBack(this.pageIndex),o();return}if(a){let e=parseInt(a.dataset.index,10);this.setPageIndex(e),this.callBack(e),o()}}setPageIndex(e){this.pageIndex=e,this.render()}}({container:w.paginationContainer,count:500,index:1,callback:k}),$=new class{constructor({query:e,year:t}){this.query=e,this.year=t,this.page=1}async searchMovie(){let e=await (0,h.default)(x(this.page,this.query,this.year));return e}}({}),q=new class{constructor({filter:e,year:t}){this.filter=e,this.year=t,this.page=1}async searchMovie(){let e=await (0,h.default)(C(this.page,this.filter,this.year));return e}}({});function N(){w.paginationContainer.innerHTML="",w.gallery.innerHTML=d()}async function B(){var t,a;(0,c.default)(u(1895),w.yearSelectEl),(0,c.default)(e(b).genres,w.genreSelectEl);let n=e(r)(w.yearSelectEl)[0],i=e(r)(w.genreSelectEl)[0];n.select.addEventListener("change",e=>$.year=q.year=e.target.value),i.select.addEventListener("change",S),w.searchInput.addEventListener("input",J),w.clearBtn.addEventListener("click",O),w.form.addEventListener("submit",P);let s=await _(1);null!==s&&(t=s.results,(a=w.gallery).innerHTML=t.map(p.default).join(""),(0,g.default)(),a.addEventListener("click",e=>{let t=e.target.closest(".m-modal");if(!t)return;let a=t.dataset.id;(0,y.onOpenModalFilmById)(a)}))}function S(e){let t=e.target.value;if("-1"===t)return k(1);q.filter=t,E(1)}function J(e){let t=e.target.value.trim();t&&w.clearBtn.classList.add("is-active"),t||(w.clearBtn.classList.remove("is-active"),k(1))}function O(){w.searchInput.value="",w.clearBtn.classList.remove("is-active"),k(1)}function P(e){e.preventDefault();let t=w.searchInput.value.trim();if(!t)return k(1),(0,s.Notify).failure("Type something, please.");$.query=t,M(1)}async function _(e){let t=await (0,h.default)(v(e));return 0===t.total_results?(N(),null):(D(t,k),t)}async function j(e){$.page=e;let t=await $.searchMovie();return t&&0!==t.total_results?(D(t,M),t):(N(),null)}async function W(e){q.page=e;let t=await q.searchMovie();return t&&0!==t.total_results?(D(t,E),t):(N(),null)}function z(e){return async function(t){var a;let n=await e(t);null!==n&&(a=n.results,w.gallery.innerHTML=a.map(p.default).join(""),(0,g.default)())}}function D(e,t){L.pageCount=Math.min(e.total_pages,500),L.callBack=t,L.pageIndex=e.page,L.render()}window.addEventListener("DOMContentLoaded",B),i("bf8lc"),i("cs2b8")}();
//# sourceMappingURL=catalog.d0d6b671.js.map
